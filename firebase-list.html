<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../firebase-element/firebase-collection.html">
<link rel="import" href="../iron-list/iron-list.html">

<!--
`<firebase-list>` wraps the content of a firebase-collection into an iron-list

    <firebase-list firebase-root="https://YOUR-FIREBASE.firebaseio.com/YOUR-COLLECTION" collected="{{collected}}" route="[[route]]" path="ROUTING-PATH">
    </firebase-list>

In the above examplle replace YOUR-FIREBASE, YOUR-COLLECTION with appropriate values from your Firebase.

ROUTING-PATH should match the URL path used to access this element which triggers the Firebase collection to initialize.

@group HekaHouse
@element firebase-list
@demo demo/index.html
-->


<dom-module id="firebase-list">
  <template>
  <style>
    :host {
      display: block;
    }
    #listContainer {
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      justify-content: flex-start;
      align-content: stretch;
      height:1300px;
      width: 100%;
      min-height:400px;
      margin: 16px;
    }
  </style>
    <firebase-collection
      id="firebaseCollection"
      data="{{collected}}"></firebase-collection>
      <template is="dom-if" if="[[collected]]">
        <iron-list id="listContainer" items="{{collected}}" as="doc">

            <template>
              <firebase-card
                firebase-root="https://soundstr.firebaseio.com/venues"
                document-key="{{doc.__firebaseKey__}}">
              </firebase-card>
            </template>

        </iron-list>
      </template>
  </template>
</dom-module>
<script>

  Polymer({
    is: 'firebase-list',

    properties: {
      firebaseRoot: {
        type: String,
        notify: true
      },
      route: {
        type: String,
        notify: true,
        observer: 'routed'
      },
      path: {
        type: String,
        notify: true
      },
      collected: {
        type: Array,
        notify: true
      }
    },
    routed: function(route) {
      if (route === this.path && this.firebaseRoot) {
        this.$.firebaseCollection.location = this.firebaseRoot;
      }
    }
  });
</script>
